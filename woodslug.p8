pico-8 cartridge // http://www.pico-8.com
version 16
__lua__
function _init()
  player={}
  curstate="menu"
  player.x=64
  player.y=64
  bullet={}
  magazine={}
end


function _update()
		local bullet
		bullet={}
		bullet.x=0
		bullet.y=0
		if curstate=="menu" then
    if is_pressed("x") then
      curstate="game"
    end
  end
  if curstate=="game" then
  		if is_pressed("z") then
  		  bullet.x=player.x+6
  		  bullet.y=player.y+6
  		  add(magazine,bullet)
  		  sfx(0)
  		end
  		
  		for bullet in all(magazine) do
  		  bullet.x+=1
  		  if bullet.x<0 or 
  		     bullet.x>128 then
  		    del(magazine, bullet)
  		  end
  		end
  		
  		if is_pressed("left") then
  		   player.x+=-1
  		end
  		if is_pressed("right") then
  		   player.x+=1
  		end
  		if is_pressed("down") then
  		   player.y+=1
  	 end
  		if is_pressed("up") then
  		  player.y+=-1
  		end
  -- aca va todo lo de juego
  end
end 	


function _draw()
  cls()
  print(curstate)
  if curstate=="menu" then
		  draw_menu()
		end
		if curstate=="game" then
		  draw_player()
		  draw_bullet()
		end
end

function draw_menu()
  print("wooden slug",40,30,4)
  print("press ❎ to start",30,100,10)
end

function draw_player()
  spr(0,player.x,player.y,2,2)
end

function draw_bullet()
  for k,v in pairs(magazine) do
    spr(32,v.x,v.y,1,1)
    print("k: "..k.." v: "..v.x)
  
  end
end

function is_pressed(direccion)
  if direccion=="up" and
     btnp(2) then
    return true
  end
  if direccion=="down" and
  			btnp(3) then
  		return true
  end
  if direccion=="left" and
     btnp(0) then
    return true
  end
  if direccion=="right" and
  			btnp(1) then
  		return true
  end
    if direccion=="z" and
     btnp(4) then
    return true
  end
  if direccion=="x" and
  			btnp(5) then
  		return true
  end
  return false
end
__gfx__
dddddddddddddddddddddddddddddddddddddddddddddddd3b333b3b000000000000000000000000000000000000000000000000000000000000000000000000
ddddddddddddddddddddddddddddddddddddddddddddddddb6b44b3b000000000000000000000000000000000000000000000000000000000000000000000000
dddddddddddddddddddddddddddddddddddddddddddddddd4446b464000000000000000000000000000000000000000000000000000000000000000000000000
ddd555555dddddddddd555555dddddddddd555555ddddddd45444445000000000000000000000000000000000000000000000000000000000000000000000000
ddd50fff5dddddddddd50fff5dddddddddd50fff5ddddddd44645444000000000000000000000000000000000000000000000000000000000000000000000000
ddd05ff3ddddddddddd05ff3ddddddddddd05ff3dddddddd44444544000000000000000000000000000000000000000000000000000000000000000000000000
ddddffffddddddddddddffffddddddddddddffffdddddddd45444445000000000000000000000000000000000000000000000000000000000000000000000000
dd55555555dddddddd55555555dddddddd55555555dddddd44644644000000000000000000000000000000000000000000000000000000000000000000000000
dd55555555dddddddd55555555dddddddd55555555dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dd5d5555d5dddddddd5d5555d5dddddddd5d5555d5dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dd5d5555d5dddddddd5d5555d5dddddddd5d5555d5dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dd5d5555d5dddddddd5d5555d5dddddddd5d5555d5dddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dddd6dd6dddddddddddd6dd6dddddddddddd6dd6dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dddd5dd5dddddddddddd5dd5dddddddddddd5dd5dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dddd0dd0dddddddddddd0dd0dddddddddddd0dd0dddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
dddd00d00ddddddddddd00d00ddddddddddd00d00ddddddd00000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0087a000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08aa7a00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
008aa000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__map__
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000060606060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000060606060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0606060606060606060606060606060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
00010000191501c1501f15021150241502e1502b6502e6502f65030650306502e6502a65024650216501e6501b650196501965017650166301563014620136201361013610136100d1200b120091100711006150
000100003125032250332501e250352503625036250042503725017250122501225001350163001630016300153001530014300143001430013300133000d40013300133000d40013500105000e5000d5000b500
